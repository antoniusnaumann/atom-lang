+ExitCode (
    Success
    Failure
)

+exit(status ExitCode) {
    cstdlib::exit(status.match() { Success { 0 }, Failure { 1 } })
}

+assert(condition Bool) {
    match(condition) {
        True { }
        False { error("Assertion failed!") }
    }
}

+assert(condition Bool, msg String) {
    match(condition) {
        True { }
        False { error("Assertion failed: " ++ msg) }
    }   
}

/// Prints the error message and quits
+error(msg String) {
    print(msg, Fatal)
    exit(Failure)
}
